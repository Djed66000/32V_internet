<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Global RS485 Control</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mqtt/4.3.7/mqtt.min.js"></script>
    <style>
        body { font-family: sans-serif; text-align: center; padding-top: 100px; background: #1a1a1a; color: white; }
        .btn { 
            background: #27ae60; border: none; color: white; 
            padding: 40px 80px; font-size: 28px; border-radius: 20px; 
            cursor: pointer; box-shadow: 0 8px #1e8449; 
        }
        .btn:active { transform: translateY(4px); box-shadow: 0 4px #1e8449; }
        #status { margin-top: 20px; color: #f1c40f; }
    </style>
</head>
<body>
    <h1>RS485 REMOTE</h1>
    <button class="btn" onclick="sendFrame()">ENVOYER TRAME</button>
    <div id="status">Connexion au serveur...</div>

    <script>
        // Connexion au broker via WebSockets (port 8000 pour HiveMQ)
        const client = mqtt.connect('wss://broker.hivemq.com:8000/mqtt');

        client.on('connect', () => {
            document.getElementById('status').innerText = "Connecté à Internet ✅";
            document.getElementById('status').style.color = "#2ecc71";
        });

        function sendFrame() {
            client.publish('pico/rs485/control', 'SEND_FRAME');
            console.log("Message envoyé !");
        }
    </script>
</body>
</html>
